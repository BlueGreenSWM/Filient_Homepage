# 규칙 시스템

규칙은 Filient의 핵심으로, 파일을 자동으로 정리하는 로직을 정의합니다. 각 규칙은 조건(Conditions)과 액션(Actions)으로 구성됩니다.

## 규칙의 구성 요소

### 기본 구조
```
규칙 = 조건(들) + 액션(들) + 우선순위
```

- **조건**: 어떤 파일에 적용할지 결정
- **액션**: 조건에 맞는 파일에 수행할 작업
- **우선순위**: 여러 규칙 간 실행 순서

## 규칙 생성

### 생성 방법

#### 1. 수동 생성
1. 폴더 선택 > "새 규칙" 클릭
2. 규칙 정보 입력
3. 조건 추가
4. 액션 추가
5. 저장

#### 2. AI 어시스턴트
1. "AI로 만들기" 선택
2. 자연어로 원하는 동작 설명
3. AI가 생성한 규칙 검토
4. 필요시 수정 후 저장

#### 3. 템플릿 사용
1. "템플릿에서 만들기" 선택
2. 템플릿 라이브러리에서 선택
3. 파라미터 조정
4. 저장

### 규칙 정보

#### 필수 정보
- **규칙 이름**: 규칙을 식별하는 고유 이름
- **폴더**: 규칙이 적용될 폴더

#### 선택 정보
- **설명**: 규칙의 목적과 동작 설명
- **태그**: 규칙 분류용 태그
- **아이콘**: 시각적 구분용 아이콘

## 조건 (Conditions)

### 1. 파일명 조건
파일 이름을 기준으로 필터링

**연산자**:
- **포함**: 특정 텍스트 포함
- **시작**: 특정 텍스트로 시작
- **끝**: 특정 텍스트로 끝남
- **정확히**: 완전히 일치
- **정규식**: 정규 표현식 패턴

**예시**:
```
파일명이 "보고서"를 포함
파일명이 "IMG_"로 시작
파일명이 ".temp"로 끝남
```

### 2. 확장자 조건
파일 확장자로 필터링

**연산자**:
- **같음**: 특정 확장자
- **다음 중 하나**: 여러 확장자 중 하나
- **아님**: 특정 확장자 제외

**예시**:
```
확장자가 "pdf"
확장자가 ["jpg", "png", "gif"] 중 하나
확장자가 "txt"가 아님
```

### 3. 날짜 조건
파일의 날짜 정보로 필터링

**날짜 유형**:
- **생성일**: 파일이 만들어진 날짜
- **수정일**: 마지막 수정 날짜
- **접근일**: 마지막 접근 날짜

**연산자**:
- **이전**: 특정 날짜 이전
- **이후**: 특정 날짜 이후
- **범위**: 두 날짜 사이
- **일 전**: N일 전
- **일 후**: N일 후

**예시**:
```
수정일이 30일 이전
생성일이 2024-01-01 이후
수정일이 7일 ~ 30일 사이
```

### 4. 크기 조건
파일 크기로 필터링

**연산자**:
- **작음**: 특정 크기보다 작음
- **큼**: 특정 크기보다 큼
- **같음**: 특정 크기와 같음
- **범위**: 크기 범위 내

**단위**:
- B (바이트)
- KB (킬로바이트)
- MB (메가바이트)
- GB (기가바이트)

**예시**:
```
크기가 10MB보다 큼
크기가 100KB ~ 1MB 사이
크기가 1GB보다 작음
```

### 5. 태그 조건
macOS 파인더 태그로 필터링

**연산자**:
- **있음**: 특정 태그 보유
- **없음**: 특정 태그 없음
- **모두**: 여러 태그 모두 보유
- **하나 이상**: 여러 태그 중 하나 이상

**태그 색상**:
- 🔴 빨강
- 🟠 주황
- 🟡 노랑
- 🟢 초록
- 🔵 파랑
- 🟣 보라
- 🟤 회색

**예시**:
```
"중요" 태그가 있음
["작업", "진행중"] 태그가 모두 있음
색상 태그가 없음
```

### 6. 모든 파일
조건 없이 모든 파일 선택

**사용 사례**:
- 폴더 내 모든 파일 이동
- 전체 백업
- 일괄 태그 추가

### 조건 조합

#### AND 연산
모든 조건을 만족하는 파일:
```
확장자가 "pdf" AND 크기가 1MB 이상 AND 수정일이 7일 이내
```

#### OR 연산 (그룹)
조건 그룹 중 하나를 만족:
```
(확장자가 "jpg" OR "png") AND 크기가 5MB 이상
```

## 액션 (Actions)

### 1. 이동 (Move)
파일을 다른 폴더로 이동

**설정**:
- **대상 폴더**: 이동할 위치
- **충돌 처리**:
  - 건너뛰기
  - 덮어쓰기
  - 이름 변경 (숫자 추가)
- **폴더 구조 유지**: 하위 폴더 구조 유지

### 2. 복사 (Copy)
파일을 다른 폴더로 복사

**설정**:
- **대상 폴더**: 복사할 위치
- **충돌 처리**: 이동과 동일
- **원본 유지**: 항상 유지됨

### 3. 별칭 만들기 (Make Alias)
파일의 바로가기 생성

**설정**:
- **별칭 위치**: 별칭을 만들 폴더
- **별칭 이름**: 커스텀 이름 (선택)

### 4. 삭제 (Delete)
파일을 휴지통으로 이동 또는 영구 삭제

**설정**:
- **삭제 방식**:
  - 휴지통으로 (기본)
  - 영구 삭제 (복구 불가)
- **확인**: 중요 파일 삭제 시 확인

### 5. 이름 변경 (Rename)
파일 이름 변경

**패턴 옵션**:
- **텍스트 추가**:
  - 앞에 추가
  - 뒤에 추가
- **텍스트 교체**:
  - 찾을 텍스트
  - 바꿀 텍스트
- **날짜 추가**:
  - 현재 날짜
  - 파일 날짜
- **번호 추가**:
  - 순차 번호
  - 랜덤 번호

**변수 사용**:
- `{date}`: 현재 날짜
- `{time}`: 현재 시간
- `{name}`: 원본 파일명
- `{ext}`: 확장자
- `{counter}`: 순차 번호

**예시**:
```
원본: document.pdf
패턴: {date}_{name}
결과: 2024-01-15_document.pdf
```

### 6. 날짜별 정렬 (Sort by Date)
날짜 기준으로 폴더 구조 생성

**구조 옵션**:
- **년/월/일**: 2024/01/15/
- **년-월**: 2024-01/
- **년**: 2024/
- **커스텀**: 사용자 정의 패턴

**날짜 기준**:
- 생성일
- 수정일
- 촬영일 (사진)

### 7. 종류별 정렬 (Sort by Kind)
파일 유형별로 폴더 구조 생성

**카테고리**:
- **문서**: PDF, Word, Excel 등
- **이미지**: JPG, PNG, GIF 등
- **비디오**: MP4, MOV, AVI 등
- **오디오**: MP3, WAV, AAC 등
- **압축**: ZIP, RAR, 7Z 등
- **코드**: JS, PY, JAVA 등
- **기타**: 분류되지 않은 파일

### 8. 태그 (Tags)
macOS 파인더 태그 관리

**작업**:
- **추가**: 새 태그 추가
- **제거**: 기존 태그 제거
- **교체**: 모든 태그 교체
- **토글**: 있으면 제거, 없으면 추가

### 9. 주석 (Comment)
파인더 파일 주석 추가

**설정**:
- **주석 내용**: 추가할 텍스트
- **추가 방식**:
  - 덮어쓰기
  - 앞에 추가
  - 뒤에 추가

## 우선순위와 실행 순서

### 우선순위 레벨
1. **높음 (High)**: 가장 먼저 실행
2. **중간 (Medium)**: 기본 우선순위
3. **낮음 (Low)**: 마지막에 실행

### 동일 우선순위 내 순서
- 드래그 앤 드롭으로 순서 조정
- 위에서 아래로 실행
- 번호로 순서 표시

### 실행 순서 예시
```
1. [높음] 임시 파일 삭제
2. [높음] 중요 문서 백업
3. [중간] PDF 파일 정리
4. [중간] 이미지 분류
5. [낮음] 오래된 파일 보관
```

## 규칙 관리

### 규칙 편집
1. 규칙 목록에서 규칙 선택
2. "편집" 버튼 클릭
3. 수정사항 적용
4. 저장

### 규칙 복제
1. 규칙 우클릭
2. "복제" 선택
3. 복제된 규칙 편집
4. 다른 폴더에 적용 가능

### 규칙 활성화/비활성화
- 토글 스위치로 즉시 전환
- 비활성 규칙은 실행되지 않음
- 설정은 유지됨

### 규칙 삭제
1. 규칙 선택
2. "삭제" 버튼 클릭
3. 확인 대화상자
4. 관련 히스토리는 유지됨

## 하위 폴더 규칙

### 상속 설정
- **상속 활성화**: 상위 폴더 규칙 적용
- **상속 비활성화**: 독립적 규칙만 적용
- **선택적 상속**: 특정 규칙만 선택

### 하위 폴더별 설정
각 하위 폴더마다:
- 개별 활성화/비활성화
- 독립 규칙 추가
- 우선순위 재정의

## 규칙 테스트

### 시험 실행 (Dry Run)
1. 규칙 선택
2. "시험 실행" 클릭
3. 영향받을 파일 미리보기
4. 예상 결과 확인
5. 실제 실행 여부 결정

### 단일 파일 테스트
1. 테스트할 파일 선택
2. 규칙에 드래그 앤 드롭
3. 조건 매칭 결과 확인
4. 액션 시뮬레이션

## 모범 사례

### 규칙 설계
- 단순하고 명확한 조건 사용
- 너무 많은 액션 피하기
- 충돌 가능성 고려
- 테스트 후 적용

### 명명 규칙
- 설명적인 이름 사용
- 일관된 명명 패턴
- 버전 관리 고려

### 성능 최적화
- 필요한 조건만 사용
- 복잡한 정규식 최소화
- 큰 파일 작업 시 주의

### 안전 고려사항
- 중요 파일은 백업 먼저
- 삭제 규칙은 신중히
- 승인 필요 옵션 활용
- 정기적 히스토리 확인

---

[목차로 돌아가기](../README.md) | [다음: 규칙 템플릿](./03-rule-templates.md)