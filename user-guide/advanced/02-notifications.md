# 알림 및 승인

Filient의 알림 및 승인 시스템은 규칙 실행 결과를 실시간으로 알려주고, 중요한 작업은 사용자 승인을 받아 안전하게 실행합니다.

## 알림 시스템

### 알림 유형

#### 실행 완료 알림
규칙 실행이 완료되면 결과를 알려줍니다.

**표시 정보**:
```
✓ 규칙 실행 완료

PDF 파일 정리
15개 파일 처리됨

성공: 14 | 건너뜀: 1
실행 시간: 00:00:45
```

**알림 수준**:
- **성공**: 모든 파일 정상 처리
- **부분 성공**: 일부 파일 실패 또는 건너뜀
- **실패**: 실행 실패 또는 오류 발생

#### 실행 실패 알림
규칙 실행 중 오류가 발생하면 즉시 알림

**표시 정보**:
```
✗ 규칙 실행 실패

PDF 파일 정리
오류: 대상 폴더 접근 권한 없음

실패한 파일: 15개
[ 상세 보기 ] [ 롤백 ]
```

**오류 유형**:
- 권한 오류
- 디스크 공간 부족
- 대상 폴더 없음
- 파일 접근 실패

#### 승인 필요 알림
승인이 필요한 규칙 실행 요청

**표시 정보**:
```
⏳ 승인 대기 중

PDF 파일 정리
15개 파일 영향받음

[ 검토 및 승인 ]
```

**우선순위**:
- 🔴 높음: 삭제 등 복구 어려운 작업
- 🟡 중간: 이동, 이름 변경 등
- 🟢 낮음: 태그 추가 등 안전한 작업

#### 시스템 알림
Filient 시스템 관련 알림

**알림 내용**:
- 업데이트 사용 가능
- 디스크 공간 부족
- 히스토리 정리 필요
- 백업 권장
- 라이선스 만료 임박

### 알림 표시 방식

#### 앱 내 알림
Filient 창 우측 상단에 알림 아이콘과 배지

```
[🔔 3]  알림 아이콘 + 읽지 않은 알림 수
```

**알림 센터**:
1. 알림 아이콘 클릭
2. 알림 목록 표시
3. 알림 클릭 시 상세 정보

**알림 그룹화**:
- 동일 규칙의 알림은 그룹으로 표시
- 폴더별 그룹화 옵션
- 날짜별 그룹화 옵션

#### macOS 시스템 알림
macOS 알림 센터에도 표시

**알림 설정**:
```
시스템 설정 > 알림 > Filient
- 알림 스타일: 배너 또는 경고
- 소리: 활성화
- 배지: 활성화
- 미리보기: 항상 표시
```

**배너 알림 예시**:
```
━━━━━━━━━━━━━━━━━━━━━━
Filient
PDF 파일 정리 완료
15개 파일이 처리되었습니다.
━━━━━━━━━━━━━━━━━━━━━━
```

#### 소리 알림
중요 이벤트 발생 시 소리 재생

**소리 옵션**:
- 기본 알림음
- 사용자 정의 소리
- 소리 끄기

**소리 재생 조건**:
- 실행 완료 (성공/실패)
- 승인 필요
- 오류 발생
- 사용자 작업 필요

### 알림 관리

#### 알림 읽기
```
알림 센터
━━━━━━━━━━━━━━━━━━━━━━

🔵 PDF 파일 정리 완료
   15개 파일 처리됨
   5분 전

⚪ 이미지 분류 완료
   28개 파일 처리됨
   1시간 전
```

- 🔵 파랑: 읽지 않음
- ⚪ 회색: 읽음

**일괄 작업**:
- 모두 읽음으로 표시
- 모두 지우기
- 오래된 알림 삭제

#### 알림 필터

**상태별 필터**:
- 읽지 않음
- 읽음
- 중요
- 보관됨

**유형별 필터**:
- 실행 완료
- 실행 실패
- 승인 대기
- 시스템 알림

**날짜별 필터**:
- 오늘
- 최근 7일
- 최근 30일
- 사용자 지정

#### 알림 액션

각 알림에서 바로 실행할 수 있는 액션:

**실행 완료 알림**:
- 상세 보기: 히스토리 상세로 이동
- 롤백: 즉시 롤백 실행
- 공유: 결과 공유
- 삭제: 알림 삭제

**실행 실패 알림**:
- 상세 보기: 오류 로그 확인
- 재시도: 규칙 다시 실행
- 롤백: 부분 실행 롤백
- 지원: 지원 팀 문의

**승인 대기 알림**:
- 승인: 즉시 승인 및 실행
- 거부: 실행 취소
- 검토: 승인 큐로 이동
- 나중에: 알림 보류

## 승인 시스템

### 승인 필요 규칙

#### 승인 모드 설정

규칙 생성/편집 시 승인 옵션 활성화:

```
규칙 설정
━━━━━━━━━━━━━━━━━━━━━━
이름: 오래된 파일 삭제
설명: 30일 이상 파일 삭제

☑ 승인 필요
   실행 전 사용자 승인 요청

우선순위: 중간 🟡

[ 저장 ]
```

**권장 사항**:
- ✅ 삭제 액션
- ✅ 대량 파일 이동
- ✅ 이름 일괄 변경
- ✅ 새 규칙 테스트
- ⚠️ 태그 추가 (필요시)
- ⚠️ 복사 (필요시)

### 승인 큐

#### 승인 대기 목록

승인이 필요한 실행 요청이 쌓입니다.

```
승인 큐 (3)
━━━━━━━━━━━━━━━━━━━━━━

🔴 오래된 파일 삭제
   ~/Downloads
   15개 파일 영향받음
   30분 전 요청
   [ 검토 ]

🟡 대량 파일 이동
   ~/Desktop → ~/Archive
   45개 파일 영향받음
   1시간 전 요청
   [ 검토 ]

🟢 태그 일괄 추가
   ~/Projects
   12개 파일 영향받음
   2시간 전 요청
   [ 검토 ]
```

**정렬 옵션**:
- 우선순위 (기본)
- 요청 시간
- 영향받는 파일 수
- 폴더 이름

#### 승인 검토

각 요청의 상세 정보를 확인할 수 있습니다.

```
승인 요청 검토
━━━━━━━━━━━━━━━━━━━━━━

규칙: 오래된 파일 삭제
폴더: ~/Downloads
요청 시각: 2024-01-15 14:30
우선순위: 높음 🔴

조건
━━━━━━━━━━━━━━━━━━━━━━
수정일이 30일 이전

액션
━━━━━━━━━━━━━━━━━━━━━━
삭제 (휴지통으로 이동)

영향받을 파일 (15개)
━━━━━━━━━━━━━━━━━━━━━━
✓ old_document1.pdf (2.3 MB, 45일 전)
✓ temp_file2.zip (15.7 MB, 60일 전)
✓ screenshot3.png (1.2 MB, 35일 전)
... 12개 더

예상 결과
━━━━━━━━━━━━━━━━━━━━━━
15개 파일이 휴지통으로 이동됩니다.
복구 가능: 예 (30일 이내)

[ 거부 ]  [ 승인 및 실행 ]
```

**검토 항목**:
- 규칙 조건 확인
- 영향받을 파일 목록
- 각 파일의 상세 정보
- 예상 결과
- 복구 가능 여부

#### 승인 또는 거부

**승인**:
1. "승인 및 실행" 버튼 클릭
2. 즉시 규칙 실행
3. 승인 큐에서 제거
4. 실행 결과 알림

**거부**:
1. "거부" 버튼 클릭
2. 실행 취소
3. 승인 큐에서 제거
4. 거부 사유 입력 (선택)

**일괄 승인/거부**:
- 여러 요청 선택
- "선택 항목 승인" 또는 "선택 항목 거부"
- 한 번에 처리

### 승인 정책

#### 자동 승인 규칙

특정 조건에 맞으면 자동으로 승인:

```
자동 승인 정책
━━━━━━━━━━━━━━━━━━━━━━

☑ 안전한 액션 (태그, 주석)
☑ 파일 수 5개 이하
☑ 신뢰할 수 있는 규칙
   (3회 이상 성공 실행)
☐ 특정 시간대
   (오전 2시~4시)
```

**이점**:
- 반복 작업 자동화
- 사용자 개입 최소화
- 안전성은 유지

#### 승인 타임아웃

일정 시간 내 승인하지 않으면 자동 처리:

```
타임아웃 설정
━━━━━━━━━━━━━━━━━━━━━━

타임아웃: 24시간
타임아웃 시 동작: 자동 거부

알림: 승인 대기 1시간 후
리마인더: 12시간 후
```

**옵션**:
- 자동 승인
- 자동 거부 (기본)
- 보류 유지

### 승인 히스토리

모든 승인/거부 내역이 기록됩니다.

```
승인 히스토리
━━━━━━━━━━━━━━━━━━━━━━

✓ 승인됨 - 2024-01-15 14:35
  오래된 파일 삭제
  15개 파일 삭제됨

✗ 거부됨 - 2024-01-15 10:20
  대량 파일 이동
  사유: 잘못된 대상 폴더

⏱ 타임아웃 - 2024-01-14 08:00
  태그 일괄 추가
  자동 거부됨
```

**활용**:
- 의사 결정 패턴 분석
- 정책 개선
- 감사 추적

## 알림 설정

### 앱 내 알림 설정

```
설정 > 알림
━━━━━━━━━━━━━━━━━━━━━━

알림 표시
☑ 실행 완료
☑ 실행 실패
☑ 승인 필요
☑ 시스템 알림

알림 유지 기간
- 읽지 않음: 무제한
- 읽음: 7일

알림 그룹화
☑ 동일 규칙 그룹화
☐ 폴더별 그룹화
☐ 날짜별 그룹화

자동 정리
☑ 30일 이상 알림 자동 삭제
```

### macOS 시스템 알림 설정

```
시스템 설정 > 알림 > Filient
━━━━━━━━━━━━━━━━━━━━━━

알림 허용: ☑ 켜기

알림 스타일:
○ 없음
● 배너 (추천)
○ 경고

옵션:
☑ 소리
☑ 배지
☑ 잠금 화면에 표시
☑ 알림 센터에 표시
☐ 차량 운전 중

미리보기 표시: 항상
```

### 소리 설정

```
설정 > 알림 > 소리
━━━━━━━━━━━━━━━━━━━━━━

소리 재생: ☑ 활성화

재생 조건:
☑ 실행 완료 (성공)
☑ 실행 실패
☑ 승인 필요
☐ 실행 완료 (건너뜀 있음)

알림음 선택:
- 기본
- 유리 깨짐
- 종소리
- 사용자 정의...

볼륨: ━━━━●━━━━ 50%
```

## 실전 활용

### 안전한 자동화

**시나리오**: 삭제 규칙을 안전하게 자동 실행

**설정**:
1. 규칙에 승인 필요 활성화
2. 스케줄 설정 (매일 오전 2시)
3. 알림 설정 (승인 대기 알림)

**워크플로우**:
```
오전 2시: 규칙 실행 요청
        ↓
승인 큐에 추가
        ↓
사용자에게 알림 (앱 + 시스템)
        ↓
사용자 검토 및 승인
        ↓
실행 및 결과 알림
```

### 중요 작업 모니터링

**시나리오**: 대량 파일 이동 작업 모니터링

**설정**:
1. 실행 완료 알림 활성화
2. 시스템 알림 활성화
3. 소리 알림 활성화

**이점**:
- 작업 완료 즉시 확인
- 오류 발생 시 빠른 대응
- 모바일에서도 확인 가능 (macOS 연동 시)

### 팀 워크플로우

**시나리오**: 여러 사용자가 공유 폴더 관리

**설정**:
1. 중요 규칙은 승인 필요
2. 승인 히스토리 기록
3. 알림 이메일 전송 (향후 기능)

**이점**:
- 투명한 작업 기록
- 잘못된 작업 방지
- 협업 효율성 향상

## 모범 사례

### 알림 관리
- **중요 알림만**: 너무 많은 알림은 무시하게 됨
- **정기 검토**: 알림 설정 주기적 점검
- **그룹화 활용**: 비슷한 알림은 그룹으로
- **자동 정리**: 오래된 알림 자동 삭제

### 승인 정책
- **위험도 기반**: 위험한 작업만 승인 필요
- **자동 승인 활용**: 안전한 작업은 자동화
- **타임아웃 설정**: 방치 방지
- **히스토리 활용**: 패턴 분석 및 개선

### 알림 우선순위
- **즉시**: 실행 실패, 오류
- **중요**: 승인 필요, 부분 실패
- **일반**: 실행 완료
- **정보**: 시스템 알림

## 문제 해결

### 알림이 표시되지 않음

**원인**:
- macOS 알림 권한 비활성화
- 방해 금지 모드 활성화
- 알림 설정 꺼짐

**해결**:
1. 시스템 설정 > 알림 > Filient 확인
2. 방해 금지 모드 해제
3. Filient 설정 > 알림 확인

### 승인 큐가 쌓임

**원인**:
- 승인을 잊어버림
- 너무 많은 규칙이 승인 필요

**해결**:
- 자동 승인 정책 활용
- 타임아웃 설정
- 안전한 규칙은 승인 해제

### 알림이 너무 많음

**원인**:
- 모든 이벤트에 알림 활성화
- 자주 실행되는 규칙

**해결**:
- 알림 조건 조정
- 그룹화 활성화
- 중요 알림만 시스템 알림 사용

## FAQ

**Q: 승인 없이 자동 실행할 수 없나요?**
- 규칙 설정에서 "승인 필요" 옵션을 해제하면 자동 실행됩니다.

**Q: 모바일에서도 알림을 받을 수 있나요?**
- macOS와 iOS가 연동되어 있으면 가능합니다.
- 시스템 설정 > Apple ID > iCloud에서 설정

**Q: 승인 대기 중인 작업을 취소할 수 있나요?**
- 예. 승인 큐에서 "거부"를 선택하면 됩니다.

**Q: 알림을 이메일로 받을 수 있나요?**
- 현재는 지원하지 않습니다. 향후 업데이트 예정입니다.

**Q: 승인 없이 실행된 규칙도 롤백할 수 있나요?**
- 예. 모든 실행은 히스토리에 기록되어 롤백 가능합니다.

---

[목차로 돌아가기](../README.md) | [다음: 규칙 스케줄러](./03-scheduler.md)
